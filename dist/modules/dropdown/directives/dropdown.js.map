{"version":3,"file":"dropdown.js","sourceRoot":"","sources":["../../../../src/modules/dropdown/directives/dropdown.ts"],"names":[],"mappings":"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","sourcesContent":["import {\n    Directive, Input, HostBinding, EventEmitter, Output, AfterContentInit, ContentChild,\n    ElementRef, HostListener, QueryList, ContentChildren\n} from \"@angular/core\";\nimport { HandledEvent, KeyCode, IFocusEvent } from \"../../../misc/util/index\";\nimport { DropdownService, DropdownAutoCloseType } from \"../services/dropdown.service\";\nimport { SuiDropdownMenu } from \"./dropdown-menu\";\n\n@Directive({\n    selector: \"[suiDropdown]\"\n})\nexport class SuiDropdown implements AfterContentInit {\n    public service:DropdownService;\n\n    @ContentChild(SuiDropdownMenu)\n    private _menu:SuiDropdownMenu;\n\n    @ContentChildren(SuiDropdown, { descendants: true })\n    private _children:QueryList<SuiDropdown>;\n\n    public get children():SuiDropdown[] {\n        // @ContentChildren includes the current element by default.\n        return this._children.filter(c => c !== this);\n    }\n\n    @Output()\n    public get isOpenChange():EventEmitter<boolean> {\n        return this.service.isOpenChange;\n    }\n\n    @HostBinding(\"class.active\")\n    public get isActive():boolean {\n        // This is to ensure nested dropdowns don't get made bold.\n        return this.service.isOpen && !this.service.isNested;\n    }\n\n    @Input()\n    public get isOpen():boolean {\n        return this.service.isOpen;\n    }\n\n    public set isOpen(value:boolean) {\n        // If we are opening the dropdown, we want to always open its parents.\n        this.service.setOpenState(value, !!value);\n    }\n\n    @HostBinding(\"class.disabled\")\n    @Input()\n    public get isDisabled():boolean {\n        return this.service.isDisabled;\n    }\n\n    public set isDisabled(value:boolean) {\n        this.service.setDisabledState(value);\n    }\n\n    @Input(\"tabindex\")\n    private _tabIndex?:number;\n\n    @HostBinding(\"attr.tabindex\")\n    public get tabIndex():number | undefined {\n        if (this.isDisabled || this.service.isNested) {\n            // If disabled, remove from tabindex.\n            return undefined;\n        }\n        if (this._tabIndex != undefined) {\n            // If custom tabindex, default to that.\n            return this._tabIndex;\n        }\n        // Otherwise, return default of 0.\n        return 0;\n    }\n\n    @Input()\n    public get autoClose():DropdownAutoCloseType {\n        return this.service.autoCloseMode;\n    }\n\n    public set autoClose(value:DropdownAutoCloseType) {\n        this.service.autoCloseMode = value;\n    }\n\n    constructor(private _element:ElementRef) {\n        this.service = new DropdownService();\n        this.service.isOpenChange.subscribe(() => {\n            if (this.service.isOpen) {\n                this._element.nativeElement.focus();\n            }\n        });\n    }\n\n    public ngAfterContentInit():void {\n        if (!this._menu) {\n            throw new Error(\"You must set [suiDropdownMenu] on the menu element.\");\n        }\n        this._menu.service = this.service;\n\n        this.childrenUpdated();\n        this._children.changes\n            .subscribe(() => this.childrenUpdated());\n    }\n\n    private childrenUpdated():void {\n        // Reregister child dropdowns each time the menu content changes.\n        this.children\n            .map(c => c.service)\n            .forEach(s => this.service.registerChild(s));\n    }\n\n    @HostListener(\"click\", [\"$event\"])\n    public onClick(e:HandledEvent):void {\n        if (!e.eventHandled) {\n            e.eventHandled = true;\n\n            this.service.toggleOpenState();\n        }\n    }\n\n    @HostListener(\"focusout\", [\"$event\"])\n    private onFocusOut(e:IFocusEvent):void {\n        if (!this._element.nativeElement.contains(e.relatedTarget)) {\n            this.externallyClose();\n        }\n    }\n\n    @HostListener(\"keypress\", [\"$event\"])\n    public onKeypress(e:HandledEvent & KeyboardEvent):void {\n        // Block the keyboard event from being fired on parent dropdowns.\n        if (!e.eventHandled) {\n\n            if (e.keyCode === KeyCode.Enter) {\n                e.eventHandled = true;\n\n                this.service.setOpenState(true);\n            }\n        }\n    }\n\n    private externallyClose():void {\n        if (this.service.autoCloseMode === DropdownAutoCloseType.ItemClick ||\n                this.service.autoCloseMode === DropdownAutoCloseType.OutsideClick) {\n                // No need to reflect in parent since they are also bound to document.\n            this.service.setOpenState(false);\n        }\n    }\n}\n"]}